{"remainingRequest":"/Users/apple/Documents/hub/gchub/node_modules/babel-loader/lib/index.js!/Users/apple/Documents/hub/gchub/src/api/user.js","dependencies":[{"path":"/Users/apple/Documents/hub/gchub/src/api/user.js","mtime":1587998535891},{"path":"/Users/apple/Documents/hub/gchub/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Documents/hub/gchub/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKdmFyIHVzZXJTdWJqZWN0SGVhZGVyID0gJ3gtZ2V0Y25zLXN1YmplY3QnOwp2YXIgdXNlclJvbGVIZWFkZXIgPSAneC1nZXRjbnMtcm9sZSc7CnZhciB1c2VySGVhZGVycyA9IFt1c2VyU3ViamVjdEhlYWRlciwgdXNlclJvbGVIZWFkZXJdOwpleHBvcnQgZnVuY3Rpb24gc2F2ZVVzZXJEZXRhaWxzKGh0dHBSZXNwb25zZSkgewogIHVzZXJIZWFkZXJzLmZvckVhY2goZnVuY3Rpb24gKGgpIHsKICAgIHJldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShoLCBodHRwUmVzcG9uc2UuaGVhZGVyc1toXSk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnRVc2VySUQoKSB7CiAgdmFyIHN1YiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHVzZXJTdWJqZWN0SGVhZGVyKTsKICBpZiAoIXN1YikgcmV0dXJuIDA7CiAgdmFyIGlkID0gcGFyc2VJbnQoc3ViLnNwbGl0KCc6JykucG9wKCkpOwogIGlmIChpc05hTihpZCkpIHJldHVybiAwOwogIHJldHVybiBpZDsKfQpleHBvcnQgZnVuY3Rpb24gY3VycmVudFVzZXJSb2xlcygpIHsKICB2YXIgcm9sZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh1c2VyUm9sZUhlYWRlcik7CiAgaWYgKCFyb2xlcykgcmV0dXJuIFtdOwogIHJldHVybiByb2xlcy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAocykgewogICAgcmV0dXJuIHMudHJpbSgpOwogIH0pOwp9"},{"version":3,"sources":["/Users/apple/Documents/hub/gchub/src/api/user.js"],"names":["userSubjectHeader","userRoleHeader","userHeaders","saveUserDetails","httpResponse","forEach","h","localStorage","setItem","headers","currentUserID","sub","getItem","id","parseInt","split","pop","isNaN","currentUserRoles","roles","map","s","trim"],"mappings":";;;;;;AAAA,IAAMA,iBAAiB,GAAG,kBAA1B;AACA,IAAMC,cAAc,GAAG,eAAvB;AAEA,IAAMC,WAAW,GAAG,CAClBF,iBADkB,EAElBC,cAFkB,CAApB;AAKA,OAAO,SAASE,eAAT,CAA0BC,YAA1B,EAAwC;AAC7CF,EAAAA,WAAW,CAACG,OAAZ,CAAoB,UAAAC,CAAC;AAAA,WAAIC,YAAY,CAACC,OAAb,CAAqBF,CAArB,EAAwBF,YAAY,CAACK,OAAb,CAAqBH,CAArB,CAAxB,CAAJ;AAAA,GAArB;AACD;AAED,OAAO,SAASI,aAAT,GAA0B;AAC/B,MAAMC,GAAG,GAAGJ,YAAY,CAACK,OAAb,CAAqBZ,iBAArB,CAAZ;AACA,MAAI,CAACW,GAAL,EAAU,OAAO,CAAP;AAEV,MAAME,EAAE,GAAGC,QAAQ,CAACH,GAAG,CAACI,KAAJ,CAAU,GAAV,EAAeC,GAAf,EAAD,CAAnB;AACA,MAAIC,KAAK,CAACJ,EAAD,CAAT,EAAe,OAAO,CAAP;AAEf,SAAOA,EAAP;AACD;AAED,OAAO,SAASK,gBAAT,GAA6B;AAClC,MAAMC,KAAK,GAAGZ,YAAY,CAACK,OAAb,CAAqBX,cAArB,CAAd;AACA,MAAI,CAACkB,KAAL,EAAY,OAAO,EAAP;AACZ,SAAOA,KAAK,CAACJ,KAAN,CAAY,GAAZ,EAAiBK,GAAjB,CAAqB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,GAAtB,CAAP;AACD","sourcesContent":["const userSubjectHeader = 'x-getcns-subject'\nconst userRoleHeader = 'x-getcns-role'\n\nconst userHeaders = [\n  userSubjectHeader,\n  userRoleHeader\n]\n\nexport function saveUserDetails (httpResponse) {\n  userHeaders.forEach(h => localStorage.setItem(h, httpResponse.headers[h]))\n}\n\nexport function currentUserID () {\n  const sub = localStorage.getItem(userSubjectHeader)\n  if (!sub) return 0\n\n  const id = parseInt(sub.split(':').pop())\n  if (isNaN(id)) return 0\n\n  return id\n}\n\nexport function currentUserRoles () {\n  const roles = localStorage.getItem(userRoleHeader)\n  if (!roles) return []\n  return roles.split(',').map(s => s.trim())\n}\n"]}]}